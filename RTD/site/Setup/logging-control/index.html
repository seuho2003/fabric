<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>LoggingControl - Hyperledger Fabric</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "LoggingControl";
    var mkdocs_page_input_path = "Setup/logging-control.md";
    var mkdocs_page_url = "/Setup/logging-control/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../API/Samples/Sample_1.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Hyperledger Fabric</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../glossary/">Glossary</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../protocol-spec/">ProtocolSpec</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../biz/usecases/">Usecases</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../API/ChaincodeAPI/">ChaincodeAPI</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../API/CoreAPI/">CoreAPI</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../API/MemberServicesAPI/">MemberServiceAPI</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../dev-setup/build/">BuildingFabric</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../dev-setup/devenv/">EnvironmentSetup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../dev-setup/devenv/">FabricDeveloperSetup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Network-setup/">NetworkSetup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Chaincode-setup/">ChaincodeSetup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">LoggingControl</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#logging-control">Logging Control</a></li>
                
                    <li><a class="toctree-l4" href="#overview">Overview</a></li>
                
                    <li><a class="toctree-l4" href="#peer">peer</a></li>
                
                    <li><a class="toctree-l4" href="#go-chaincodes">Go chaincodes</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../ca-setup/">CASetup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../tech/application-ACL/">ApplicationACL</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../tech/attributes/">Attributes</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../tech/best-practices/">BestPractices</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../SystemChaincodes/noop/">SystemChaincodes</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../FAQ/chaincode_FAQ/">ChainCode_FAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../FAQ/confidentiality_FAQ/">ConfidentialityFAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../FAQ/consensus_FAQ/">ConsensusFAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../FAQ/identity_management_FAQ/">IdentityManagementFAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../FAQ/usage_FAQ/">UsageFAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../Gerrit/changes/">GerritChanges</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../Gerrit/lf-account/">GerritLFAccount</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../Gerrit/reviewing/">GerritReview</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Hyperledger Fabric</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>LoggingControl</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="logging-control">Logging Control</h1>
<h2 id="overview">Overview</h2>
<p>Logging in the <code>peer</code> application and in the <code>shim</code> interface to chaincodes is programmed using facilities provided by the <code>github.com/op/go-logging</code> package. This package supports</p>
<ul>
<li>Logging control based on the severity of the message</li>
<li>Logging control based on the software <em>module</em> generating the message</li>
<li>Different pretty-printing options based on the severity of the message</li>
</ul>
<p>All logs are currently directed to <code>stderr</code>, and the pretty-printing is currently fixed. However global and module-level control of logging by severity is provided for both users and developers. There are currently no formalized rules for the types of information provided at each severity level, however when submitting bug reports the developers may want to see full logs down to the DEBUG level.</p>
<p>In pretty-printed logs the logging level is indicated both by color and by a 4-character code, e.g, &ldquo;ERRO&rdquo; for ERROR, &ldquo;DEBU&rdquo; for DEBUG, etc. In the logging context a <em>module</em> is an arbitrary name (string) given by developers to groups of related messages. In the pretty-printed example below, the logging modules &ldquo;peer&rdquo;, &ldquo;rest&rdquo; and &ldquo;main&rdquo; are generating logs.</p>
<pre><code>16:47:09.634 [peer] GetLocalAddress -&gt; INFO 033 Auto detected peer address: 9.3.158.178:30303
16:47:09.635 [rest] StartOpenchainRESTServer -&gt; INFO 035 Initializing the REST service...
16:47:09.635 [main] serve -&gt; INFO 036 Starting peer with id=name:"vp1" , network id=dev, address=9.3.158.178:30303, discovery.rootnode=, validator=true
</code></pre>
<p>An arbitrary number of logging modules can be created at runtime, therefore
there is no &ldquo;master list&rdquo; of modules, and logging control constructs can not
check whether logging modules actually do or will exist. Also note that the
logging module system does not understand hierarchy or wildcarding: You may
see module names like &ldquo;foo/bar&rdquo; in the code, but the logging system only sees
a flat string. It doesn&rsquo;t understand that &ldquo;foo/bar&rdquo; is related to &ldquo;foo&rdquo; in any
way, or that &ldquo;foo/*&rdquo; might indicate all &ldquo;submodules&rdquo; of foo.</p>
<h2 id="peer">peer</h2>
<p>The logging level of the <code>peer</code> command can be controlled from the command line for each invocation using the <code>--logging-level</code> flag, for example</p>
<pre><code>peer node start --logging-level=debug
</code></pre>
<p>The default logging level for each individual <code>peer</code> subcommand can also be
set in the
<a href="https://github.com/hyperledger/fabric/blob/master/peer/core.yaml">core.yaml</a>
file. For example the key <code>logging.node</code> sets the default level for the <code>node</code>
subcommmand. Comments in the file also explain how the logging level can be
overridden in various ways by using environment varaibles.</p>
<p>Logging severity levels are specified using case-insensitive strings chosen from</p>
<pre><code>CRITICAL | ERROR | WARNING | NOTICE | INFO | DEBUG
</code></pre>
<p>The full logging level specification for the <code>peer</code> is of the form</p>
<pre><code>[&lt;module&gt;[,&lt;module&gt;...]=]&lt;level&gt;[:[&lt;module&gt;[,&lt;module&gt;...]=]&lt;level&gt;...]
</code></pre>
<p>A logging level by itself is taken as the overall default. Otherwise, overrides for individual or groups of modules can be specified using the</p>
<pre><code>&lt;module&gt;[,&lt;module&gt;...]=&lt;level&gt;
</code></pre>
<p>syntax. Examples of <level> specifications (valid for all of
<code>--logging-level</code>, environment variable and
<a href="https://github.com/hyperledger/fabric/blob/master/peer/core.yaml">core.yaml</a>
settings):</p>
<pre><code>info                                       - Set default to INFO
warning:main,db=debug:chaincode=info       - Default WARNING; Override for main,db,chaincode
chaincode=info:main=debug:db=debug:warning - Same as above
</code></pre>
<h2 id="go-chaincodes">Go chaincodes</h2>
<p>As independently executed programs, user-provided chaincodes can use any appropriate technique to create their private logs - from simple print statements to fully-annotated and level-controlled logs. The chaincode <code>shim</code> package provides APIs that allow a chaincode to create and manage logging objects whose logs will be formatted and interleaved consistently with the <code>shim</code> logs.</p>
<p><code>NewLogger(name string) *ChaincodeLogger</code> - Create a logging object for use by a chaincode</p>
<p><code>(c *ChaincodeLogger) SetLevel(level LoggingLevel)</code> - Set the logging level of the logger</p>
<p><code>(c *ChaincodeLogger) IsEnabledFor(level LoggingLevel) bool</code> - Return true if logs will be generated at the given level</p>
<p><code>LogLevel(levelString string) (LoggingLevel, error)</code> - Convert a string to a <code>LoggingLevel</code></p>
<p>A <code>LoggingLevel</code> is a member of the enumeration</p>
<pre><code>LogDebug, LogInfo, LogNotice, LogWarning, LogError, LogCritical
</code></pre>

<p>which can be used directly, or generated by passing a case-insensitive version of the strings</p>
<pre><code>DEBUG, INFO, NOTICE, WARNING, ERROR, CRITICAL
</code></pre>

<p>to the <code>LogLevel</code> API.</p>
<p>Formatted logging at various severity levels is provided by the functions</p>
<pre><code>(c *ChaincodeLogger) Debug(args ...interface{})
(c *ChaincodeLogger) Info(args ...interface{})
(c *ChaincodeLogger) Notice(args ...interface{})
(c *ChaincodeLogger) Warning(args ...interface{})
(c *ChaincodeLogger) Error(args ...interface{})
(c *ChaincodeLogger) Critical(args ...interface{})

(c *ChaincodeLogger) Debugf(format string, args ...interface{})
(c *ChaincodeLogger) Infof(format string, args ...interface{})
(c *ChaincodeLogger) Noticef(format string, args ...interface{})
(c *ChaincodeLogger) Warningf(format string, args ...interface{})
(c *ChaincodeLogger) Errorf(format string, args ...interface{})
(c *ChaincodeLogger) Criticalf(format string, args ...interface{})
</code></pre>

<p>The <code>f</code> forms of the logging APIs provide for precise control over the formatting of the logs. The non-<code>f</code> forms of the APIs currently insert a space between the printed representations of the arguments, and arbitrarily choose the formats to use.</p>
<p>In the current implementation, the logs produced by the <code>shim</code> and a <code>ChaincodeLogger</code> are timestamped, marked with the logger <em>name</em> and severity level, and written to <code>stderr</code>. Note that logging level control is currently based on the <em>name</em> provided when the <code>ChaincodeLogger</code> is created. To avoid ambiguities, all <code>ChaincodeLogger</code> should be given unique names other than &ldquo;shim&rdquo;. The logger <em>name</em> will appear in all log messages created by the logger. The <code>shim</code> logs as &ldquo;shim&rdquo;.</p>
<p>Go language chaincodes can also control the logging level of the chaincode <code>shim</code> interface through the <code>SetLoggingLevel</code> API.</p>
<p><code>SetLoggingLevel(LoggingLevel level)</code> - Control the logging level of the shim</p>
<p>The default logging level for the shim is <code>LogDebug</code>.</p>
<p>Below is a simple example of how a chaincode might create a private logging object logging at the <code>LogInfo</code> level, and also control the amount of logging provided by the <code>shim</code> based on an environment variable.</p>
<pre><code>var logger = shim.NewLogger(&quot;myChaincode&quot;)

func main() {

    logger.SetLevel(shim.LogInfo)

    logLevel, _ := shim.LogLevel(os.Getenv(&quot;SHIM_LOGGING_LEVEL&quot;))
    shim.SetLoggingLevel(logLevel)
    ...
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ca-setup/" class="btn btn-neutral float-right" title="CASetup">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Chaincode-setup/" class="btn btn-neutral" title="ChaincodeSetup"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2016 IBM Corp. <br></br>Contributed to the Hyperledger Project under the <a href="https://github.com/hyperledger/fabric/blob/master/LICENSE" target="_blank">Apache Software License 2.0</a></p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Chaincode-setup/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../ca-setup/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
